<!DOCTYPE html>
<html>
    <head>
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content=" initial-scale=1, width=device-width, height=device-height, viewport-fit=cover">
        <link rel="stylesheet" href="css/index.css">
        <title>Demo</title>
    </head>
     <body style = "background: var(--listcolor-scheme-background); font-family: Helvetica; margin:0px; width:100vw; height: 100vx;  -webkit-user-select: none; -webkit-touch-callout: none; -webkit-overflow-scrolling:touch;   -webkit-tap-highlight-color: rgba(0,0,0,0); ">
            <div  id="deviceready" style = "margin-top: 50px;">
                <button type="button" class="itemButton" ontouchstart="this.className='pushedButton';" ontouchend="this.className='itemButton';" onclick="doViewWeb(3);">Compact Tab
                </button>
                <button type="button" class="itemButton" ontouchstart="this.className='pushedButton';" ontouchend="this.className='itemButton';" onclick="doViewWeb(2);">Three column
                </button>
                <button type="button" class="itemButton" ontouchstart="this.className='pushedButton';" ontouchend="this.className='itemButton';" onclick="doViewWeb(1);">Two Column
                </button>
                <button type="button" class="itemButton" ontouchstart="this.className='pushedButton';" ontouchend="this.className='itemButton';" onclick="doViewWeb(0);">Classic Web
                </button>
                <button type="button" class="itemButton" ontouchstart="this.className='pushedButton';" ontouchend="this.className='itemButton';" onclick="doViewTable();">Classic Table
                </button>
            </div >
            <div style = "text-align: center; margin-top: 10px;">
                <span style="font-size:24px;" id= "result" class="centertxt"> </span>
            </div>
        </div>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            
            const tableItems = [
              {
                itemText: "One",
                itemImage: "tv.png"
              },
              {
                itemText: "Two",
                itemImage: "tv.png"
              },
              {
                itemText: "Three",
                itemImage: "tv.png"
              },
              {
                itemText: "Four",
                itemImage: "tv.png"
              },
              {
                itemText: "Five",
                itemImage: "tv.png"
              }
            ];

            function splitViewClosed( results,status)
            {
                if(status == cordova.plugins.SplitView.dismissType.left)
                    document.getElementById("result").textContent="Cancelled";
                else
                    document.getElementById("result").textContent=results;
            }
            
         // var isDarkMode = window.matchMedia('(prefers-color-scheme:dark)');
        function doViewWeb(option)
         {
            cordova.plugins.SplitView.initSplitView();
            
            if(option == 0)  //classic view
            {
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches)
                {
                    // is dark
                    cordova.plugins.SplitView.setPrimaryBackgroundColor(30,30,30);
                    cordova.plugins.SplitView.setSecondaryBackgroundColor(30,30,30);
                }
                else
                {
                    // not dark
                    cordova.plugins.SplitView.setPrimaryBackgroundColor(228,228,228);
                    cordova.plugins.SplitView.setSecondaryBackgroundColor(228,228,228);
                }
                cordova.plugins.SplitView.preferredPrimaryColumnWidthFraction = 0.5;
                cordova.plugins.SplitView.primaryTitle = "Primary";
                cordova.plugins.SplitView.secondaryTitle = "Secondary";
                cordova.plugins.SplitView.leftButtonTitle = "Cancel";
                cordova.plugins.SplitView.rightButtonTitle = "Done";
                cordova.plugins.SplitView.closed = splitViewClosed;
           
                // Classic split view tests
                //
                //test color set
                //cordova.plugins.SplitView.setBarTintColor(255,0,0);
                //cordova.plugins.SplitView.setTintColor(0,255,0);

                //test fullscreen
                //cordova.plugins.SplitView.fullscreen = true;
            
                //test maximumPrimaryColumnWidth
                //cordova.plugins.SplitView.maximumPrimaryColumnWidth = 100.0
            
                //test minimumPrimaryColumnWidth
                //cordova.plugins.SplitView.minimumPrimaryColumnWidth = 100.0
                
                cordova.plugins.SplitView.show(null,null,true,null,null);
            }
            else //new view
            {
                let redBackground = 228;
                let greenBackground = 228;
                let blueBackground = 228;
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches)
                {
                    // is dark
                    redBackground = 30;
                    greenBackground = 30;
                    blueBackground = 30;
                }
                
                let viewPropJSON;
                let viewPropCompact;
                
                switch (option)
                {
                    case 0:
                        viewPropJSON = '{"primaryTitle":"Primary", "secondaryTitle":"Secondary","fullscreen":true, "Style":"doubleColumn","backgroundColor":[' + redBackground+','+ greenBackground+ ',' + blueBackground+ ',' + '1]}';
                        break;
                    case 1:
                        viewPropJSON = '{"primaryTitle":"Primary","primaryURL":"doublePrimary.html", "secondaryTitle":"Secondary","secondaryURL":"doubleSecondary.html", "style":"doubleColumn","topColumnForCollapsingToProposedTopColumn":"primary", "preferredSplitBehavior":"automatic","preferredDisplayMode":"twoBesideSecondary","primaryEdge":"leading","backgroundColor":[' + redBackground+','+ greenBackground+ ',' + blueBackground+ ',' + '1]}';
                        break;
                    case 2:
                        viewPropJSON = '{"primaryTitle":"Primary",    "primaryURL":"triplePrimary.html","topColumnForCollapsingToProposedTopColumn":"primary","showsSecondaryOnlyButton":true,"preferredDisplayMode":"twoBesideSecondary","secondaryTitle":"Secondary","secondaryURL":"tripleSecondary.html","style":"tripleColumn","supplementaryTitle":"Supplementary","supplementaryURL":"tripleSupplementary.html","tintColor":[1,255,3,1],"backgroundColor":[' + redBackground+','+ greenBackground+ ',' + blueBackground+ ',' + '1]}';
                        break;
                    case 3:
                        viewPropJSON = '{"primaryURL":"tab1.html","primaryTitle":"Primary","secondaryURL":"tab2.html", "secondaryTitle":"Secondary","compactURL":"compact.html", "style":"doubleColumn", "preferredSplitBehavior":"automatic","preferredDisplayMode":"twoBesideSecondary","usesCompact":true, "backgroundColor":[' + redBackground+','+ greenBackground+ ',' + blueBackground+ ',' + '1]}';
                        viewPropCompact = '{"tabBarItems":["title1","1.circle","title2","2.circle","title3","3.circle"],"tabItemsAppend":["1",""],"backgroundColor":[' + redBackground+','+ greenBackground+ ',' + blueBackground+ ',' + '1]}';
                        break;
                }
    
           cordova.plugins.SplitView.showView(viewPropJSON,null,null,null,viewPropCompact,null,null);
            }
         }
        
        function doViewTable()
        {
            cordova.plugins.SplitView.initSplitView();
            cordova.plugins.SplitView.preferredPrimaryColumnWidthFraction = 0.5;
            cordova.plugins.SplitView.displayModeButtonItem = false;
            cordova.plugins.SplitView.primaryTitle = "Primary";
            cordova.plugins.SplitView.secondaryTitle = "Secondary";
            cordova.plugins.SplitView.rightButtonTitle = "Done";
            cordova.plugins.SplitView.useTableView = true;
            cordova.plugins.SplitView.closed = splitViewClosed;
            for(const item of tableItems)
            {
                cordova.plugins.SplitView.addTableItem(item.itemText,item.itemImage);
            }
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches)
            {
                // is dark
                cordova.plugins.SplitView.setSecondaryBackgroundColor(30,30,30);
            }
            else
            {
                // not dark
                cordova.plugins.SplitView.setSecondaryBackgroundColor(228,228,228);
            }
            cordova.plugins.SplitView.show(null,null,true,null,null);
        }
        </script>
    </body>
</html>

